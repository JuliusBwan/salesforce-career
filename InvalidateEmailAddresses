List<Contact> contacts = [SELECT Id, Email FROM Contact WHERE Email != null LIMIT 500];
List<String> excluded = new List<String>{'mint','gbg','gbgplc','@bigmantra.com','invalid'};
List<Contact> consToUpdate = new List<Contact>();

for (Contact c : contacts) {
    Boolean skip = false;
    
    for (String p : excluded) {
        if (c.Email.toLowerCase().contains(p)) { 
        	skip = true; 
        	break; 
        }
    }
    if (!skip) {
        c.Email += '.invalid';
        consToUpdate.add(c);
    }
}
Database.SaveResult[] results = Database.update(consToUpdate, false);

for (Integer i = 0; i < results.size(); i++) {
    if (!results[i].isSuccess()) {
        System.debug('Failed record ID: ' + consToUpdate[i].Id);
        for (Database.Error err : results[i].getErrors()) {
            System.debug('Error: ' + err.getMessage());
            System.debug('Status code: ' + err.getStatusCode());
        }
    }
}

